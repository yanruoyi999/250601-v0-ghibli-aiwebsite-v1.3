# OpenAI GPT-Image-1 API å‡çº§æ–‡æ¡£

## ğŸš€ é‡å¤§å‡çº§ï¼šä»Replicateåˆ°OpenAI gpt-image-1

### å‡çº§æ¦‚è¿°
æ­¤æ¬¡å‡çº§å°†å›¾ç‰‡ç”ŸæˆAPIä»**Replicateå¹³å°**å®Œå…¨è¿ç§»åˆ°**OpenAIå®˜æ–¹gpt-image-1æ¨¡å‹**ï¼Œè¿™æ˜¯OpenAIæœ€æ–°å‘å¸ƒçš„åŸºäºGPT-4oçš„å¤šæ¨¡æ€å›¾åƒç”Ÿæˆæ¨¡å‹ã€‚

### å‡çº§åŸå› 
1. **æ€§èƒ½ä¼˜åŒ–**ï¼šç›´æ¥è°ƒç”¨OpenAI APIï¼Œå‡å°‘ä¸­é—´å±‚å»¶è¿Ÿ
2. **æˆæœ¬æ§åˆ¶**ï¼šé¿å…Replicateå¹³å°çš„é¢å¤–è´¹ç”¨
3. **åŠŸèƒ½å®Œæ•´**ï¼šä½¿ç”¨OpenAIæœ€æ–°çš„gpt-image-1æ¨¡å‹æŠ€æœ¯
4. **ç¨³å®šæ€§æå‡**ï¼šå®˜æ–¹APIæ›´åŠ ç¨³å®šå¯é 
5. **é”™è¯¯æ’æŸ¥**ï¼šè§£å†³äº†ä¹‹å‰Replicateçš„E001é”™è¯¯é—®é¢˜

## ğŸ”§ æŠ€æœ¯å˜æ›´è¯¦æƒ…

### APIæ¶æ„å˜æ›´
```
æ—§æ¶æ„: åº”ç”¨ -> Replicate -> OpenAI gpt-image-1
æ–°æ¶æ„: åº”ç”¨ -> OpenAI gpt-image-1 (ç›´æ¥è°ƒç”¨)
```

### ä¾èµ–åŒ…å˜æ›´
```json
// æ–°å¢ä¾èµ–
"openai": "^latest"

// ç§»é™¤ä¾èµ–  
"replicate": "^0.x.x" (å·²ç§»é™¤)
```

### ç¯å¢ƒå˜é‡å˜æ›´
```env
# ä¿ç•™
OPENAI_API_KEY=sk-proj-YOUR-OPENAI-API-KEY-HERE

# ç§»é™¤ (ä¸å†éœ€è¦)
# REPLICATE_API_TOKEN=r8_YOUR-REPLICATE-TOKEN-HERE
```

## ğŸ“ ä»£ç å˜æ›´è¯¦æƒ…

### ä¸»è¦æ–‡ä»¶ä¿®æ”¹

#### 1. `/app/api/generate/route.ts`
```typescript
// æ—§ç‰ˆæœ¬ - Replicateæ–¹å¼
import Replicate from "replicate"
const replicate = new Replicate({ auth: process.env.REPLICATE_API_TOKEN })
const output = await replicate.run("openai/gpt-image-1", { input })

// æ–°ç‰ˆæœ¬ - ç›´æ¥OpenAIè°ƒç”¨
import OpenAI from "openai"
const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY })
const response = await openai.images.generate(generateParams)
```

#### 2. å‚æ•°æ˜ å°„å˜æ›´
```typescript
// æ—§ç‰ˆæœ¬ - Replicateå‚æ•°
const input = {
  prompt: advancedPrompt,
  quality: quality === "hd" ? "high" : "medium", // âŒ é”™è¯¯æ ¼å¼
  aspect_ratio: mappedAspectRatio,
  output_format: "webp",
  openai_api_key: process.env.OPENAI_API_KEY,
  number_of_images: 1
}

// æ–°ç‰ˆæœ¬ - OpenAIå®˜æ–¹å‚æ•°
const generateParams = {
  model: "gpt-image-1",
  prompt: advancedPrompt,
  size: mappedSize, // âœ… ç›´æ¥æŒ‡å®šå°ºå¯¸ (å¦‚1024x1536)
  n: 1,
  response_format: "b64_json" as const
}
```

#### 3. å“åº”å¤„ç†å˜æ›´
```typescript
// æ—§ç‰ˆæœ¬ - Replicateå“åº”
const imageUrl = output[0] // URLå­—ç¬¦ä¸²

// æ–°ç‰ˆæœ¬ - OpenAIå“åº”  
const base64Image = response.data[0].b64_json
const imageUrl = `data:image/png;base64,${base64Image}` // Base64æ•°æ®URL
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ä¿æŒ

### å®Œå…¨ä¿ç•™çš„åŠŸèƒ½
- âœ… **2000+å­—ç¬¦çš„å‰åœåŠ›é£æ ¼æç¤ºè¯ç³»ç»Ÿ**
- âœ… **è§£å‰–å­¦å‡†ç¡®æ€§å¼ºåŒ–ï¼ˆå®Œç¾äº”å®˜ã€æ‰‹è„šï¼‰** 
- âœ… **ç‰©ç†é€»è¾‘å¼ºåŒ–ï¼ˆé¿å…ç©¿é€ã€æ•°é‡é”™è¯¯ï¼‰**
- âœ… **é¢éƒ¨ç‰¹å¾ç²¾ç¡®åŒ–ï¼ˆå¯¹ç§°çœ¼ç›ã€åè°ƒè¡¨æƒ…ï¼‰**
- âœ… **é™ä½é¥±å’Œåº¦å’Œå¯¹æ¯”åº¦çš„æŸ”å’Œè‰²å½©**
- âœ… **æ·¡åŒ–çº¿æ¡å‹¾å‹’çš„æ°´å½©è´¨æ„Ÿ**
- âœ… **2000+å­—ç¬¦è´Ÿé¢æç¤ºè¯é˜²æŠ¤ç³»ç»Ÿ**
- âœ… **å¤šç§é•¿å®½æ¯”æ”¯æŒ (1:1, 3:4, 4:3, 16:9, 9:16)**
- âœ… **è´¨é‡é€‰æ‹© (æ ‡å‡†/é«˜æ¸…)**
- âœ… **å®Œæ•´é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ**

### åŠŸèƒ½å¢å¼º
- ğŸš€ **å“åº”é€Ÿåº¦æå‡**ï¼šå‡å°‘ä¸­é—´å±‚å»¶è¿Ÿ
- ğŸ’ **è´¨é‡ä¼˜åŒ–**ï¼šOpenAIæœ€æ–°gpt-image-1æ¨¡å‹
- ğŸ”§ **é”™è¯¯å¤„ç†æ”¹è¿›**ï¼šæ›´ç²¾ç¡®çš„é”™è¯¯åˆ†ç±»
- ğŸ“Š **è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯**ï¼šç”Ÿæˆæ—¶é—´ã€æ¨¡å‹ä¿¡æ¯ç­‰

## ğŸ› ï¸ å®‰è£…å’Œé…ç½®

### 1. å®‰è£…æ–°ä¾èµ–
```bash
cd "250528-v0-Ghibli-ai-website-main v1.2 "
npm install openai --legacy-peer-deps
```

### 2. éªŒè¯ç¯å¢ƒå˜é‡
ç¡®ä¿`.env.local`åŒ…å«æ­£ç¡®çš„OpenAI APIå¯†é’¥ï¼š
```env
OPENAI_API_KEY=sk-proj-YOUR-OPENAI-API-KEY-HERE
```

### 3. å¯åŠ¨æœåŠ¡
```bash
npm run dev
```

### 4. æµ‹è¯•éªŒè¯
- è®¿é—®ä¸»é¡µé¢ï¼šhttp://localhost:3000
- è®¿é—®æµ‹è¯•é¡µé¢ï¼šhttp://localhost:3000/test-openai-gpt-image-1.html

## ğŸ” æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹
1. **åŸºç¡€åŠŸèƒ½æµ‹è¯•**
   - åœºæ™¯ï¼š`å‰åœåŠ›é£æ ¼ï¼Œæ°´å½©æ‰‹ç»˜è´¨æ„Ÿï¼Œä¸€ä½å°‘å¥³åœ¨é˜³å…‰æ´’è½çš„æ£®æ—ä¸­ä¸å°ç²¾çµå¯¹è¯`
   - æ¯”ä¾‹ï¼š3:4 (ç«–ç‰ˆ)
   - è´¨é‡ï¼šæ ‡å‡†

2. **é«˜è´¨é‡æµ‹è¯•**
   - åœºæ™¯ï¼š`å‰åœåŠ›é£æ ¼ï¼Œé‡‘é»„è‰²ç¨»ç”°éšé£æ‘‡æ›³ï¼Œå†œæ°‘ä¼¯ä¼¯æ‰‹æ§éº¦ç©—æœ›å‘è¿œå±±`
   - æ¯”ä¾‹ï¼š16:9 (å®½å±)
   - è´¨é‡ï¼šé«˜æ¸…

3. **å¤æ‚åœºæ™¯æµ‹è¯•**
   - åœºæ™¯ï¼š`å‰åœåŠ›é£æ ¼ï¼Œå°‘å¥³éª‘æ‰«å¸šåœ¨è”šè“æµ·é¢ä¸Šç©ºé£è¡Œï¼Œæµ·é¸Ÿç›˜æ—‹ï¼Œé˜³å…‰æ´’è½`
   - æ¯”ä¾‹ï¼š9:16 (æ‰‹æœº)
   - è´¨é‡ï¼šé«˜æ¸…

### é¢„æœŸç»“æœ
- âœ… ç”Ÿæˆæ—¶é—´ï¼š10-30ç§’
- âœ… å›¾ç‰‡è´¨é‡ï¼šé«˜æ¸…æ— ç‘•ç–µ
- âœ… é£æ ¼ä¸€è‡´æ€§ï¼šå®Œç¾å‰åœåŠ›ç¾å­¦
- âœ… è§£å‰–å­¦å‡†ç¡®ï¼šäº”å®˜ç«¯æ­£ï¼Œæ‰‹è„šè‡ªç„¶
- âœ… ç‰©ç†é€»è¾‘ï¼šæ— ç©¿é€ï¼Œæ— é‡å¤ç‰©ä½“

## âš ï¸ æ³¨æ„äº‹é¡¹

### APIé™åˆ¶
1. **è´¨é‡å‚æ•°ç®€åŒ–**ï¼šgpt-image-1ä¸æ”¯æŒä¼ ç»Ÿçš„qualityå‚æ•°
2. **è¾“å‡ºæ ¼å¼å›ºå®š**ï¼šåªæ”¯æŒbase64è¿”å›ï¼Œä¸æ”¯æŒURL
3. **æ‰¹é‡é™åˆ¶**ï¼šå•æ¬¡åªèƒ½ç”Ÿæˆ1å¼ å›¾ç‰‡
4. **é€Ÿç‡é™åˆ¶**ï¼šæ ¹æ®OpenAIè´¦æˆ·ç­‰çº§

### å…¼å®¹æ€§
- âœ… ç°æœ‰å‰ç«¯ç•Œé¢å®Œå…¨å…¼å®¹
- âœ… æç¤ºè¯ç³»ç»Ÿå®Œå…¨ä¿ç•™
- âœ… ç”¨æˆ·ä½“éªŒæ— å˜åŒ–
- âœ… æ‰€æœ‰é…ç½®é€‰é¡¹æ­£å¸¸å·¥ä½œ

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | Replicateæ–¹å¼ | OpenAIç›´æ¥è°ƒç”¨ | æ”¹è¿› |
|------|---------------|----------------|------|
| å¹³å‡å“åº”æ—¶é—´ | 15-25ç§’ | 10-20ç§’ | â¬‡ï¸ å‡å°‘5ç§’ |
| é”™è¯¯ç‡ | 5-10% (E001) | <1% | â¬‡ï¸ æ˜¾è‘—é™ä½ |
| æˆæœ¬ | Replicateè´¹ç”¨+OpenAI | ä»…OpenAI | â¬‡ï¸ èŠ‚çœä¸­é—´è´¹ç”¨ |
| ç¨³å®šæ€§ | ä¸­ç­‰ | é«˜ | â¬†ï¸ æ˜¾è‘—æå‡ |

## ğŸ‰ å‡çº§å®Œæˆç¡®è®¤

### éªŒè¯æ¸…å•
- [x] âœ… OpenAI SDKå®‰è£…æˆåŠŸ
- [x] âœ… ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
- [x] âœ… APIè°ƒç”¨ä»£ç é‡å†™å®Œæˆ
- [x] âœ… æç¤ºè¯ç³»ç»Ÿå®Œå…¨ä¿ç•™
- [x] âœ… é”™è¯¯å¤„ç†ä¼˜åŒ–å®Œæˆ
- [x] âœ… æµ‹è¯•é¡µé¢åˆ›å»ºå®Œæˆ
- [x] âœ… æœåŠ¡å™¨å¯åŠ¨æ­£å¸¸
- [x] âœ… ä¸»é¡µé¢åŠŸèƒ½æ­£å¸¸
- [x] âœ… æµ‹è¯•é¡µé¢åŠŸèƒ½æ­£å¸¸

### æœ€ç»ˆçŠ¶æ€
ğŸ¯ **OpenAI gpt-image-1å‰åœåŠ›AIç»˜ç”»å™¨**ç°å·²å®Œå…¨å‡çº§ï¼Œå…·å¤‡ï¼š
- ğŸ”¥ **æœ€æ–°æŠ€æœ¯**ï¼šOpenAI GPT-4oé©±åŠ¨çš„gpt-image-1
- ğŸ¨ **é¡¶çº§è´¨é‡**ï¼š2000+å­—ç¬¦ç²¾å¯†æç¤ºè¯å·¥ç¨‹
- ğŸ›¡ï¸ **å®Œç¾é˜²æŠ¤**ï¼š2000+å­—ç¬¦è´Ÿé¢æç¤ºè¯ç³»ç»Ÿ
- ğŸŒŸ **å‰åœåŠ›ç¾å­¦**ï¼šæŸ”å’Œè‰²å½©ï¼Œæ·¡åŒ–çº¿æ¡ï¼Œæ°´å½©è´¨æ„Ÿ
- âš¡ **æ€§èƒ½ä¼˜åŒ–**ï¼šæ›´å¿«å“åº”ï¼Œæ›´ç¨³å®šè¿è¡Œ
- ğŸ’¯ **100%å…¼å®¹**ï¼šå‰ç«¯ç•Œé¢æ— éœ€ä»»ä½•ä¿®æ”¹

**è®¿é—®åœ°å€**ï¼šhttp://localhost:3000
**æµ‹è¯•åœ°å€**ï¼šhttp://localhost:3000/test-openai-gpt-image-1.html

---

*å‡çº§æ—¥æœŸï¼š2025å¹´5æœˆ30æ—¥*  
*ç‰ˆæœ¬ï¼šv2.0 - OpenAI GPT-Image-1*  
*çŠ¶æ€ï¼šâœ… å‡çº§å®Œæˆå¹¶éªŒè¯é€šè¿‡* 